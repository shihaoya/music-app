{"version":3,"file":"js/915.79346950.js","mappings":"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","sources":["webpack://wangyiyun/./src/components/VMusicItem/index.vue","webpack://wangyiyun/./src/components/VMusicItem/index.vue?86be","webpack://wangyiyun/./src/views/Search/index.vue","webpack://wangyiyun/./src/views/Search/index.vue?e928"],"sourcesContent":["<template>\r\n  <ol class=\"musicList\" v-if=\"musicList\">\r\n    <li v-for=\"(music, index) in selfMusicList\" :key=\"music.id\" class=\"music-item\">\r\n      <div class=\"music-left-info\" @click=\"playMusic(index)\">\r\n        <p class=\"music-order\">{{ index + 1 }}</p>\r\n        <div class=\"music-info\">\r\n          <h5 class=\"music-name\">{{ music.name }}</h5>\r\n          <p class=\"music-author\">\r\n            <span v-for=\"author in music.ar\" :key=\"author.id\">\r\n              {{ author.name }}\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n<!--      <div class=\"music-right-tool\">-->\r\n<!--        <svg class=\"icon\" aria-hidden=\"true\" v-if=\"music.mv !== 0\">-->\r\n<!--          <use xlink:href=\"#icon-shipinbofang\"></use>-->\r\n<!--        </svg>-->\r\n<!--        <svg class=\"icon\" aria-hidden=\"true\">-->\r\n<!--          <use xlink:href=\"#icon-31liebiao\"></use>-->\r\n<!--        </svg>-->\r\n<!--      </div>-->\r\n    </li>\r\n  </ol>\r\n  <p class=\"notMusic\" v-else>未找到音乐</p>\r\n</template>\r\n\r\n<script>\r\nimport {useStore} from 'vuex'\r\nimport {computed, toRaw} from 'vue'\r\nimport {Toast} from 'vant'\r\n\r\nexport default {\r\n  name: 'VMusicItem',\r\n  props: {\r\n    musicList: Array,\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    function playMusic (index) {\r\n      store.commit('FooterMusic/updatePlayList', toRaw(props.musicList))\r\n      store.commit('FooterMusic/updatePlayListIndex', index)\r\n    }\r\n    const selfMusicList = computed(() => {\r\n      if(!props.musicList) {\r\n        Toast('未找到对应歌曲')\r\n        return\r\n      }\r\n      return props.musicList?.map(item => {\r\n        // console.log(item)\r\n        return {\r\n          id: item.id,\r\n          name: item.name || item.al.name || item.album.name,\r\n          ar: item.ar || item.artists,\r\n          mv: +(item.mv?.toString() || item.mvid?.toString()), //短路语句遇到0不会返回，字符串0会返回，再换回普通数字0\r\n        }\r\n      })\r\n    })\r\n    // console.log(selfMusicList)\r\n    return {\r\n      playMusic, //播放音乐（修改音乐列表会自动检测）\r\n      selfMusicList, //处理后的数组，因为接口数据属性名偶尔有差异\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.notMusic {\r\n  padding: 10px;\r\n  text-align: center;\r\n}\r\n.musicList {\r\n  .music-item {\r\n    padding: 0 .2rem;\r\n    height: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    &:active {\r\n      background-color: rgba(0, 0, 0, .2);\r\n    }\r\n    .music-left-info {\r\n      display: flex;\r\n      .music-order {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin-right: 10px;\r\n      }\r\n      .music-info{\r\n        .music-name {\r\n          font-size: .3rem;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          width: 6rem;\r\n        }\r\n        .music-author {\r\n          font-size: .2rem;\r\n          color: #999;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          width: 5rem;\r\n          span {\r\n            margin-right: 6px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .music-right-tool {\r\n      height: 100%;\r\n      width: 20%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: end;\r\n      .icon {\r\n        margin-left: 10px;\r\n        flex-shrink: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=86416232&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=86416232&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\project\\\\wangyiyun\\\\wangyiyun\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-86416232\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"searchInputBox\">\r\n    <svg class=\"icon\" aria-hidden=\"true\" @click=\"$router.go(-1)\">\r\n      <use xlink:href=\"#icon-zuojiantou\"></use>\r\n    </svg>\r\n    <input type=\"text\" placeholder=\"请输入搜索歌曲\" v-model.trim=\"searchObj.keyword\" @keyup.enter=\"searchMusic\">\r\n  </div>\r\n  <div class=\"searchHistory\">\r\n    <span class=\"searchHistoryTitle\">历史</span>\r\n    <div class=\"historyBody\">\r\n      <p><span v-for=\"key in searchObj.keywordList\" @click=\"searchHistory(key)\">{{ key }}</span></p>\r\n    </div>\r\n    <svg class=\"icon\" aria-hidden=\"true\" @click=\"delHistory\">\r\n      <use xlink:href=\"#icon-shanchu\"></use>\r\n    </svg>\r\n  </div>\r\n  <VMusicItem :musicList=\"searchObj.searchResult\"/>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {reactive} from 'vue'\r\nimport {Toast} from 'vant'\r\nimport {reqSearch} from '@/api'\r\nimport VMusicItem from '@/components/VMusicItem'\r\n\r\nexport default {\r\n  name: 'Search',\r\n  components: {\r\n    VMusicItem,\r\n  },\r\n  setup() {\r\n    const searchObj = reactive({\r\n      keyword: '',\r\n      keywordList: JSON.parse(localStorage.getItem('keywordList')) || [],\r\n      searchResult: [],\r\n\r\n    })\r\n    //发送查询请求\r\n    async function getSearchResult(keywords) {\r\n      const result = await reqSearch({keywords})\r\n      // console.log(result.result.songs)\r\n      searchObj.searchResult = result.result.songs\r\n    }\r\n\r\n    //查询音乐（发送请求）\r\n    function searchMusic() {\r\n      //如果没有输入关键字，进行提示\r\n      if (!searchObj.keyword.trim()) {\r\n        Toast({\r\n          message: '搜索内容不能为空',\r\n          type: 'fail',\r\n        })\r\n        return\r\n      }\r\n\r\n      //搜索结果处理.\r\n      getSearchResult(searchObj.keyword)\r\n\r\n      //保存搜索历史，并且存储到本地\r\n      searchObj.keywordList.unshift(searchObj.keyword)\r\n      //数组去重后，截取最新的10个历史\r\n      searchObj.keywordList = [...new Set(searchObj.keywordList)].slice(0, 10)\r\n      localStorage.setItem('keywordList', JSON.stringify(searchObj.keywordList))\r\n    }\r\n    //搜索历史被点击时，将搜索历史内容填充到输入框，并且执行查询函数\r\n    function searchHistory(key) {\r\n      searchObj.keyword = key\r\n      searchMusic()\r\n    }\r\n    //删除历史\r\n    function delHistory() {\r\n      if (!(localStorage.getItem('keywordList') && searchObj.keywordList.length)) {\r\n        Toast('内容已经被清空啦')\r\n        return\r\n      }\r\n      if (confirm('确认清空历史记录吗')) {\r\n        searchObj.keywordList = []\r\n        localStorage.removeItem('keywordList')\r\n      }\r\n    }\r\n\r\n    return {\r\n      searchObj,//保存搜索关键词、历史搜索列表、搜索结果\r\n      searchMusic,//搜索音乐的方法\r\n      delHistory,//删除搜索历史记录\r\n      searchHistory,//历史记录被点击，进行查询\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.searchInputBox {\r\n  display: flex;\r\n  height: 1rem;\r\n  align-items: center;\r\n  padding: 0 .2rem;\r\n\r\n  .icon {\r\n    width: .4rem;\r\n    height: .4rem;\r\n  }\r\n\r\n  input {\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    margin-left: .2rem;\r\n    width: 100%;\r\n    padding: .1rem;\r\n  }\r\n}\r\n\r\n.searchHistory {\r\n  display: flex;\r\n  padding: 0 .2rem;\r\n  margin: .2rem 0;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n\r\n  .searchHistoryTitle {\r\n    align-self: start;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .historyBody {\r\n    width: 80%;\r\n    overflow-x: auto;\r\n    &::-webkit-scrollbar {\r\n      width: 0;\r\n      height: 0;\r\n    }\r\n\r\n    p {\r\n      display: flex;\r\n\r\n      span {\r\n        display: inline-block;\r\n        background-color: #eee;\r\n        white-space: nowrap;\r\n        color: #666;\r\n        padding: 0.1rem;\r\n        border-radius: 0.4rem;\r\n        margin-left: .1rem;\r\n        margin-right: .1rem;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=79b7d522&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=79b7d522&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\project\\\\wangyiyun\\\\wangyiyun\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-79b7d522\"]])\n\nexport default __exports__"],"names":["class","$props","_createElementBlock","_Fragment","_renderList","$setup","music","index","key","id","_createElementVNode","onClick","_toDisplayString","name","ar","author","props","musicList","Array","setup","store","useStore","playMusic","commit","toRaw","selfMusicList","computed","map","item","al","album","artists","mv","toString","mvid","__exports__","render","_hoisted_2","_hoisted_8","_ctx","go","type","placeholder","keyword","$event","onKeyup","_hoisted_5","keywordList","_hoisted_7","_createVNode","_component_VMusicItem","searchResult","components","VMusicItem","searchObj","reactive","JSON","parse","localStorage","getItem","async","getSearchResult","keywords","result","reqSearch","songs","searchMusic","trim","unshift","Set","slice","setItem","stringify","message","searchHistory","delHistory","length","confirm","removeItem"],"sourceRoot":""}