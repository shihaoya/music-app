"use strict";(self["webpackChunkwangyiyun"]=self["webpackChunkwangyiyun"]||[]).push([[660],{7178:function(i,s,t){t.d(s,{Z:function(){return f}});var e=t(3396),a=t(7139);const n={key:0,class:"musicList"},l=["onClick"],c={class:"music-order"},o={class:"music-info"},u={class:"music-name"},r={class:"music-author"},d={key:1,class:"notMusic"};function m(i,s,t,m,p,g){return t.musicList?((0,e.wg)(),(0,e.iD)("ol",n,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(m.selfMusicList,((i,s)=>((0,e.wg)(),(0,e.iD)("li",{key:i.id,class:"music-item"},[(0,e._)("div",{class:"music-left-info",onClick:i=>m.playMusic(s)},[(0,e._)("p",c,(0,a.zw)(s+1),1),(0,e._)("div",o,[(0,e._)("h5",u,(0,a.zw)(i.name),1),(0,e._)("p",r,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(i.ar,(i=>((0,e.wg)(),(0,e.iD)("span",{key:i.id},(0,a.zw)(i.name),1)))),128))])])],8,l)])))),128))])):((0,e.wg)(),(0,e.iD)("p",d,"未找到音乐"))}t(8146);var p=t(3776),g=t(65),v=t(4870),_={name:"VMusicItem",props:{musicList:Array},setup(i){const s=(0,g.oR)();function t(t){s.commit("FooterMusic/updatePlayList",(0,v.IU)(i.musicList)),s.commit("FooterMusic/updatePlayListIndex",t)}const a=(0,e.Fl)((()=>{if(i.musicList)return i.musicList?.map((i=>({id:i.id,name:i.name||i.al.name||i.album.name,ar:i.ar||i.artists,mv:+(i.mv?.toString()||i.mvid?.toString())})));(0,p.Z)("未找到对应歌曲")}));return{playMusic:t,selfMusicList:a}}},h=t(89);const w=(0,h.Z)(_,[["render",m],["__scopeId","data-v-86416232"]]);var f=w},4660:function(i,s,t){t.r(s),t.d(s,{default:function(){return ri}});var e=t(3396);function a(i,s,t,a,n,l){const c=(0,e.up)("DetailHeader"),o=(0,e.up)("DetailContent");return a.loadStatus?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)(e.HY,{key:0},[(0,e.Wm)(c,{detail:i.detail,creator:i.detail.creator},null,8,["detail","creator"]),(0,e.Wm)(o,{detailMusicList:i.detailMusicList,subscribedCount:i.detail.subscribedCount},null,8,["detailMusicList","subscribedCount"])],64))}var n=t(7139);const l=i=>((0,e.dD)("data-v-cabd9dba"),i=i(),(0,e.Cn)(),i),c={class:"detail-header"},o={class:"bg"},u=["src"],r={class:"item-left"},d=l((()=>(0,e._)("use",{"xlink:href":"#icon-zuojiantou"},null,-1))),m=[d],p=l((()=>(0,e._)("h2",null,"歌单",-1))),g={class:"item-right"},v=l((()=>(0,e._)("use",{"xlink:href":"#icon-sousuo"},null,-1))),_=[v],h={class:"info-box"},w={class:"info-left"},f=["src"],y={class:"play-count"},C={class:"info-right"},L={class:"name"},k={class:"user"},b=["src"],D={class:"nickname"},M={class:"description"},z={class:"options"},x={class:"options-item"},I=l((()=>(0,e._)("use",{"xlink:href":"#icon-pinglun"},null,-1))),P=[I],F={class:"options-item"},H=l((()=>(0,e._)("svg",{class:"icon","aria-hidden":"true"},[(0,e._)("use",{"xlink:href":"#icon-fenxiang"})],-1))),U=l((()=>(0,e._)("header",{class:"comment-header"},"评论区",-1))),Z={class:"comment-item"},j=["src"],K={class:"text"},S={class:"name"},q={class:"content"},A={class:"time"};function W(i,s,t,a,l,d){const v=(0,e.up)("van-list"),I=(0,e.up)("van-popup");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",c,[(0,e._)("div",o,[(0,e._)("img",{src:t.detail.coverImgUrl,alt:"",class:"bg-img"},null,8,u)]),(0,e._)("div",r,[((0,e.wg)(),(0,e.iD)("svg",{class:"icon","aria-hidden":"true",onClick:s[0]||(s[0]=s=>i.$router.go(-1))},m)),p]),(0,e._)("div",g,[((0,e.wg)(),(0,e.iD)("svg",{class:"icon","aria-hidden":"true",onClick:s[1]||(s[1]=s=>i.$router.push("/Search"))},_))])]),(0,e._)("div",h,[(0,e._)("div",w,[(0,e._)("img",{src:t.detail.coverImgUrl,class:"cover-img",alt:""},null,8,f),(0,e._)("span",y,(0,n.zw)(a.changeCount(t.detail.playCount)),1)]),(0,e._)("div",C,[(0,e._)("h3",L,(0,n.zw)(t.detail.name),1),(0,e._)("p",k,[t.creator.avatarUrl?((0,e.wg)(),(0,e.iD)("img",{key:0,src:t.creator.avatarUrl,alt:"",class:"avatar-img"},null,8,b)):(0,e.kq)("",!0),(0,e._)("span",D,(0,n.zw)(t.creator.nickname),1)]),(0,e._)("p",M,(0,n.zw)(t.detail.description),1)])]),(0,e._)("div",z,[(0,e._)("div",x,[((0,e.wg)(),(0,e.iD)("svg",{class:"icon","aria-hidden":"true",onClick:s[2]||(s[2]=s=>i.showPlaylistComment=!0)},P)),(0,e._)("span",null,(0,n.zw)(t.detail.commentCount),1)]),(0,e._)("div",F,[H,(0,e._)("span",null,(0,n.zw)(t.detail.shareCount),1)])]),(0,e.Wm)(I,{show:i.showPlaylistComment,"onUpdate:show":s[4]||(s[4]=s=>i.showPlaylistComment=s),position:"bottom",style:{height:"60%",width:"100%"}},{default:(0,e.w5)((()=>[U,(0,e.Wm)(v,{loading:i.commentLoading,"onUpdate:loading":s[3]||(s[3]=s=>i.commentLoading=s),finished:i.commentFinished,"finished-text":"没有更多了",onLoad:i.loadComment,offset:10},{default:(0,e.w5)((()=>[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(i.playlistCommentList,(i=>((0,e.wg)(),(0,e.iD)("div",{class:"playlist-comments",key:i.commentId},[(0,e._)("div",Z,[(0,e._)("img",{src:i.user.avatarUrl,alt:"",class:"avatar"},null,8,j),(0,e._)("div",K,[(0,e._)("span",S,(0,n.zw)(i.user.nickname),1),(0,e._)("p",q,(0,n.zw)(i.content),1),(0,e._)("time",A,(0,n.zw)(i.timeStr),1)])])])))),128))])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["show"])],64)}t(8146);var Y=t(3776),V=t(4870),B=t(5101),N={name:"DetailHeader",props:{detail:Object,creator:Object},setup(i){const s=(0,V.qj)({showPlaylistComment:!1,playlistCommentList:[],currentCommentPage:1,commentLoading:!1,commentFinished:!1,async loadComment(){s.commentLoading=!0;const t=await(0,B.N2)({id:i.detail.id,offset:20*(s.currentCommentPage++-1)});s.playlistCommentList.push(...t.comments),s.commentLoading=!1,t.comments.length<20&&((0,Y.Z)("暂无更多评论"),s.commentFinished=!0)}});function t(i){return i>=1e8?(i/1e8).toFixed(2)+"亿":i>=1e4?(i/1e4).toFixed(2)+"万":i}return{changeCount:t,...(0,V.BK)(s)}}},O=t(89);const R=(0,O.Z)(N,[["render",W],["__scopeId","data-v-cabd9dba"]]);var $=R;const E=i=>((0,e.dD)("data-v-30930022"),i=i(),(0,e.Cn)(),i),G={class:"detail-content"},J={class:"head"},Q=E((()=>(0,e._)("svg",{class:"icon","aria-hidden":"true"},[(0,e._)("use",{"xlink:href":"#icon-bofang1"})],-1))),T=(0,e.Uk)("播放全部"),X={class:"head-right"},ii={class:"coll-btn"};function si(i,s,t,a,l,c){const o=(0,e.up)("VMusicItem");return(0,e.wg)(),(0,e.iD)("div",G,[(0,e._)("div",J,[(0,e._)("div",{class:"head-left",onClick:s[0]||(s[0]=(...i)=>a.playAll&&a.playAll(...i))},[Q,(0,e._)("h4",null,[T,(0,e._)("span",null,"(共"+(0,n.zw)(t.detailMusicList.length)+"首)",1)])]),(0,e._)("div",X,[(0,e._)("div",ii,[(0,e._)("span",null,"收藏量("+(0,n.zw)(t.subscribedCount)+")",1)])])]),(0,e.Wm)(o,{musicList:t.detailMusicList},null,8,["musicList"])])}var ti=t(65),ei=t(7178),ai={name:"DetailContent",components:{VMusicItem:ei.Z},props:{detailMusicList:Array,subscribedCount:Number},setup(i){const s=(0,ti.oR)();function t(){s.commit("FooterMusic/updatePlayList",i.detailMusicList),s.commit("FooterMusic/updatePlayListIndex",0)}return{playAll:t}}};const ni=(0,O.Z)(ai,[["render",si],["__scopeId","data-v-30930022"]]);var li=ni,ci=t(678),oi={name:"MusicDetail",components:{DetailHeader:$,DetailContent:li},setup(){const i=(0,ci.yj)(),s=i.query.id,t=(0,V.iH)(!0),e=(0,V.qj)({detail:{},detailMusicList:[]});return Promise.all([(0,B.ix)({id:s}),(0,B.Kg)({id:s})]).then((i=>{t.value=!1,e.detail=i[0].playlist,e.detailMusicList=i[1].songs})),{...(0,V.BK)(e),loadStatus:t}}};const ui=(0,O.Z)(oi,[["render",a]]);var ri=ui}}]);
//# sourceMappingURL=660.2c5e3931.js.map