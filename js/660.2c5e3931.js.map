{"version":3,"file":"js/660.2c5e3931.js","mappings":"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","sources":["webpack://wangyiyun/./src/components/VMusicItem/index.vue","webpack://wangyiyun/./src/components/VMusicItem/index.vue?86be","webpack://wangyiyun/./src/views/MusicDetail/index.vue","webpack://wangyiyun/./src/views/MusicDetail/DetailHeader.vue","webpack://wangyiyun/./src/views/MusicDetail/DetailHeader.vue?8059","webpack://wangyiyun/./src/views/MusicDetail/DetailContent.vue","webpack://wangyiyun/./src/views/MusicDetail/DetailContent.vue?2a6e","webpack://wangyiyun/./src/views/MusicDetail/index.vue?21da"],"sourcesContent":["<template>\r\n  <ol class=\"musicList\" v-if=\"musicList\">\r\n    <li v-for=\"(music, index) in selfMusicList\" :key=\"music.id\" class=\"music-item\">\r\n      <div class=\"music-left-info\" @click=\"playMusic(index)\">\r\n        <p class=\"music-order\">{{ index + 1 }}</p>\r\n        <div class=\"music-info\">\r\n          <h5 class=\"music-name\">{{ music.name }}</h5>\r\n          <p class=\"music-author\">\r\n            <span v-for=\"author in music.ar\" :key=\"author.id\">\r\n              {{ author.name }}\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n<!--      <div class=\"music-right-tool\">-->\r\n<!--        <svg class=\"icon\" aria-hidden=\"true\" v-if=\"music.mv !== 0\">-->\r\n<!--          <use xlink:href=\"#icon-shipinbofang\"></use>-->\r\n<!--        </svg>-->\r\n<!--        <svg class=\"icon\" aria-hidden=\"true\">-->\r\n<!--          <use xlink:href=\"#icon-31liebiao\"></use>-->\r\n<!--        </svg>-->\r\n<!--      </div>-->\r\n    </li>\r\n  </ol>\r\n  <p class=\"notMusic\" v-else>未找到音乐</p>\r\n</template>\r\n\r\n<script>\r\nimport {useStore} from 'vuex'\r\nimport {computed, toRaw} from 'vue'\r\nimport {Toast} from 'vant'\r\n\r\nexport default {\r\n  name: 'VMusicItem',\r\n  props: {\r\n    musicList: Array,\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    function playMusic (index) {\r\n      store.commit('FooterMusic/updatePlayList', toRaw(props.musicList))\r\n      store.commit('FooterMusic/updatePlayListIndex', index)\r\n    }\r\n    const selfMusicList = computed(() => {\r\n      if(!props.musicList) {\r\n        Toast('未找到对应歌曲')\r\n        return\r\n      }\r\n      return props.musicList?.map(item => {\r\n        // console.log(item)\r\n        return {\r\n          id: item.id,\r\n          name: item.name || item.al.name || item.album.name,\r\n          ar: item.ar || item.artists,\r\n          mv: +(item.mv?.toString() || item.mvid?.toString()), //短路语句遇到0不会返回，字符串0会返回，再换回普通数字0\r\n        }\r\n      })\r\n    })\r\n    // console.log(selfMusicList)\r\n    return {\r\n      playMusic, //播放音乐（修改音乐列表会自动检测）\r\n      selfMusicList, //处理后的数组，因为接口数据属性名偶尔有差异\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.notMusic {\r\n  padding: 10px;\r\n  text-align: center;\r\n}\r\n.musicList {\r\n  .music-item {\r\n    padding: 0 .2rem;\r\n    height: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    &:active {\r\n      background-color: rgba(0, 0, 0, .2);\r\n    }\r\n    .music-left-info {\r\n      display: flex;\r\n      .music-order {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin-right: 10px;\r\n      }\r\n      .music-info{\r\n        .music-name {\r\n          font-size: .3rem;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          width: 6rem;\r\n        }\r\n        .music-author {\r\n          font-size: .2rem;\r\n          color: #999;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          width: 5rem;\r\n          span {\r\n            margin-right: 6px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .music-right-tool {\r\n      height: 100%;\r\n      width: 20%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: end;\r\n      .icon {\r\n        margin-left: 10px;\r\n        flex-shrink: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=86416232&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=86416232&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\project\\\\wangyiyun\\\\wangyiyun\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-86416232\"]])\n\nexport default __exports__","<template>\r\n  <template v-if=\"!loadStatus\">\r\n    <DetailHeader :detail=\"detail\" :creator=\"detail.creator\"/>\r\n    <DetailContent :detailMusicList=\"detailMusicList\" :subscribedCount=\"detail.subscribedCount\"/>\r\n  </template>\r\n</template>\r\n\r\n<script>\r\nimport DetailHeader from '@/views/MusicDetail/DetailHeader'\r\nimport DetailContent from '@/views/MusicDetail/DetailContent'\r\nimport {computed, reactive, ref, toRefs} from 'vue'\r\nimport {useStore} from 'vuex'\r\nimport {useRoute} from 'vue-router'\r\nimport {reqDetailMusicList, reqPlayListDetail} from '@/api'\r\n\r\n\r\nexport default {\r\n  name: 'MusicDetail',\r\n  components: {\r\n    DetailHeader,\r\n    DetailContent,\r\n  },\r\n  setup() {\r\n    // const store = useStore()\r\n    const route = useRoute()\r\n    const id = route.query.id\r\n    const loadStatus = ref(true)\r\n    const asyncData = reactive({\r\n      detail: {},//详情页数据\r\n      detailMusicList: [],//歌单音乐列表\r\n    })\r\n    Promise.all([\r\n      //  请求歌单列表和歌单详情\r\n      reqPlayListDetail({id}),\r\n      reqDetailMusicList({id}),\r\n    ]).then(res => {\r\n      // console.log(res)\r\n      loadStatus.value = false\r\n      asyncData.detail = res[0].playlist\r\n      asyncData.detailMusicList = res[1].songs\r\n    })\r\n    return {\r\n      ...toRefs(asyncData),\r\n      loadStatus,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"detail-header\">\r\n    <div class=\"bg\"><img :src=\"detail.coverImgUrl\" alt=\"\" class=\"bg-img\"/></div>\r\n    <div class=\"item-left\">\r\n      <svg class=\"icon\" aria-hidden=\"true\" @click=\"$router.go(-1)\">\r\n        <use xlink:href=\"#icon-zuojiantou\"></use>\r\n      </svg>\r\n      <h2>歌单</h2>\r\n    </div>\r\n    <div class=\"item-right\">\r\n      <svg class=\"icon\" aria-hidden=\"true\" @click=\"$router.push('/Search')\">\r\n        <use xlink:href=\"#icon-sousuo\"></use>\r\n      </svg>\r\n      <!--      <svg class=\"icon\" aria-hidden=\"true\">-->\r\n      <!--        <use xlink:href=\"#icon-31liebiao\"></use>-->\r\n      <!--      </svg>-->\r\n    </div>\r\n  </div>\r\n  <div class=\"info-box\">\r\n    <div class=\"info-left\">\r\n      <img :src=\"detail.coverImgUrl\" class=\"cover-img\" alt=\"\"/>\r\n      <span class=\"play-count\">{{ changeCount(detail.playCount) }}</span>\r\n    </div>\r\n    <div class=\"info-right\">\r\n      <h3 class=\"name\">{{ detail.name }}</h3>\r\n      <p class=\"user\">\r\n        <img :src=\"creator.avatarUrl\" v-if=\"creator.avatarUrl\" alt=\"\" class=\"avatar-img\"/>\r\n        <span class=\"nickname\">{{ creator.nickname }}</span>\r\n        <!--        <svg class=\"icon\" aria-hidden=\"true\">-->\r\n        <!--          <use xlink:href=\"#icon-xiangyou1\"></use>-->\r\n        <!--        </svg>-->\r\n      </p>\r\n      <p class=\"description\">{{ detail.description }}</p>\r\n    </div>\r\n  </div>\r\n  <div class=\"options\">\r\n    <div class=\"options-item\">\r\n      <svg class=\"icon\" aria-hidden=\"true\" @click=\"showPlaylistComment = true\">\r\n        <use xlink:href=\"#icon-pinglun\"></use>\r\n      </svg>\r\n      <span>{{ detail.commentCount }}</span>\r\n    </div>\r\n    <div class=\"options-item\">\r\n      <svg class=\"icon\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-fenxiang\"></use>\r\n      </svg>\r\n      <span>{{ detail.shareCount }}</span>\r\n    </div>\r\n<!--    <div class=\"options-item\">-->\r\n<!--      <svg class=\"icon\" aria-hidden=\"true\">-->\r\n<!--        <use xlink:href=\"#icon-xiazai\"></use>-->\r\n<!--      </svg>-->\r\n<!--      <span>下载</span>-->\r\n<!--    </div>-->\r\n<!--    <div class=\"options-item\">-->\r\n<!--      <svg class=\"icon\" aria-hidden=\"true\">-->\r\n<!--        <use xlink:href=\"#icon-fuxuan\"></use>-->\r\n<!--      </svg>-->\r\n<!--      <span>多选</span>-->\r\n<!--    </div>-->\r\n  </div>\r\n  <van-popup v-model:show=\"showPlaylistComment\" position=\"bottom\" :style=\"{ height: '60%', width: '100%' }\">\r\n    <header class=\"comment-header\">评论区</header>\r\n    <van-list\r\n        v-model:loading=\"commentLoading\"\r\n        :finished=\"commentFinished\"\r\n        finished-text=\"没有更多了\"\r\n        @load=\"loadComment\"\r\n        :offset=\"10\"\r\n    >\r\n      <div class=\"playlist-comments\" v-for=\"item in playlistCommentList\" :key=\"item.commentId\">\r\n        <div class=\"comment-item\">\r\n          <img :src=\"item.user.avatarUrl\" alt=\"\" class=\"avatar\">\r\n          <div class=\"text\">\r\n            <span class=\"name\">{{item.user.nickname}}</span>\r\n            <p class=\"content\">{{item.content}}</p>\r\n            <time class=\"time\">{{item.timeStr}}</time>\r\n          </div>\r\n        </div>\r\n      </div>\r\n<!--      <van-cell v-for=\"item in playlistCommentList\" :key=\"item\" :title=\"item\" />-->\r\n    </van-list>\r\n  </van-popup>\r\n</template>\r\n\r\n<script>\r\nimport {reactive, toRefs, watch} from 'vue'\r\nimport {reqPlaylistComment} from '@/api'\r\nimport {Toast} from 'vant'\r\n\r\nexport default {\r\n  name: 'DetailHeader',\r\n  props: {\r\n    detail: Object,\r\n    creator: Object,\r\n  },\r\n  setup(props) {\r\n    const playlistObj = reactive({\r\n      showPlaylistComment: false, //是否显示评论\r\n      playlistCommentList: [], //所有已加载评论\r\n      currentCommentPage: 1, //默认1页\r\n      commentLoading: false, //默认不是加载状态\r\n      commentFinished: false, //所有评论加载完毕，显示全部加载（改为true）\r\n      //加载评论\r\n      async loadComment() {\r\n        //当前状态改为加载中\r\n        playlistObj.commentLoading = true\r\n\r\n        //发送请求\r\n        const result = await reqPlaylistComment({\r\n          id: props.detail.id, //歌单的id\r\n          offset: (playlistObj.currentCommentPage++ - 1) * 20, //计算偏移量(每次请求都会修改当前页加一)\r\n        })\r\n        playlistObj.playlistCommentList.push(...result.comments)\r\n        //修改状态加载完毕\r\n        playlistObj.commentLoading = false\r\n\r\n        //每次加载20条，如果小于20条，就是加载完毕所有评论\r\n        if(result.comments.length < 20) {\r\n          Toast('暂无更多评论')\r\n          playlistObj.commentFinished = true\r\n        }\r\n      },\r\n    })\r\n\r\n    // 修改单位万、亿\r\n    function changeCount(num) {\r\n      if (num >= 100000000) {\r\n        return (num / 100000000).toFixed(2) + '亿'\r\n      } else if (num >= 10000) {\r\n        return (num / 10000).toFixed(2) + '万'\r\n      }\r\n      return num\r\n    }\r\n    return {\r\n      changeCount,\r\n      ...toRefs(playlistObj),\r\n      // showPlaylistComment, //是否显示歌单评论\r\n      // playlistCommentList, //所有评论的列表\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail-header {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 1rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  .bg {\r\n    width: 100%;\r\n    height: 12rem;\r\n    position: absolute;\r\n    z-index: -1;\r\n    background-color: #333;\r\n\r\n    .bg-img {\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n      opacity: .5;\r\n      filter: blur(30px);\r\n    }\r\n  }\r\n\r\n  .item-left,\r\n  .item-right {\r\n    width: 25%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin: 0 0.2rem;\r\n\r\n    h2 {\r\n      font-size: 0.4rem;\r\n      color: #eee;\r\n    }\r\n\r\n    .icon {\r\n      fill: #eee;\r\n    }\r\n  }\r\n\r\n  .item-right {\r\n    justify-content: end;\r\n  }\r\n}\r\n\r\n.info-box {\r\n  display: flex;\r\n  padding: 10px;\r\n  justify-content: space-around;\r\n\r\n  .icon {\r\n    fill: #eee;\r\n  }\r\n\r\n  .info-left {\r\n    position: relative;\r\n\r\n    .play-count {\r\n      position: absolute;\r\n      font-size: .2rem;\r\n      right: 0.1rem;\r\n      top: 0.1rem;\r\n      color: #eee;\r\n      text-shadow: 0 0 3px black;\r\n      padding: 5px;\r\n      border-radius: 20px;\r\n      background-color: #00000044;\r\n    }\r\n\r\n    .cover-img {\r\n      flex-shrink: 0;\r\n      max-width: 3rem;\r\n      max-height: 3rem;\r\n      border-radius: 20px;\r\n    }\r\n  }\r\n\r\n  .info-right {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    padding-left: 10px;\r\n\r\n    .name {\r\n      font-size: 0.3rem;\r\n      color: #eee;\r\n    }\r\n\r\n    .user {\r\n      color: #ccc;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      span {\r\n        width: 2rem;\r\n        display: inline-block;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        word-break: normal;\r\n      }\r\n\r\n      .avatar-img {\r\n        margin-right: 10px;\r\n        width: 0.7rem;\r\n        height: 0.7rem;\r\n        border-radius: 100%;\r\n      }\r\n    }\r\n\r\n    .description {\r\n      color: #ccc;\r\n      font-size: 0.2rem;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n      overflow: hidden;\r\n      padding: 6px 2px 0 6px;\r\n      min-height: 30px;\r\n    }\r\n  }\r\n}\r\n\r\n.options {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  color: #eee;\r\n\r\n  div {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n\r\n  .icon {\r\n    fill: #eee;\r\n  }\r\n}\r\n\r\n.comment-header {\r\n  height: 1rem;\r\n  font-size: .5rem;\r\n  line-height: 1rem;\r\n  text-align: center;\r\n  border-bottom: 1px solid #999;\r\n}\r\n\r\n.playlist-comments {\r\n  width: 100%;\r\n  word-break: break-word;\r\n  .comment-item {\r\n    padding: 0.2rem 0;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    font-size: 0.2rem;\r\n    .avatar {\r\n      width: .6rem;\r\n      height: .6rem;\r\n      border-radius: 50%;\r\n    }\r\n    .text {\r\n      width: 80%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .name, .time {\r\n        color: #999;\r\n      }\r\n    }\r\n    &:active {\r\n      background-color: #ccc;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./DetailHeader.vue?vue&type=template&id=cabd9dba&scoped=true\"\nimport script from \"./DetailHeader.vue?vue&type=script&lang=js\"\nexport * from \"./DetailHeader.vue?vue&type=script&lang=js\"\n\nimport \"./DetailHeader.vue?vue&type=style&index=0&id=cabd9dba&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\project\\\\wangyiyun\\\\wangyiyun\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cabd9dba\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"detail-content\">\r\n    <div class=\"head\">\r\n      <div class=\"head-left\" @click=\"playAll\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-bofang1\"></use>\r\n        </svg>\r\n        <h4>播放全部<span>(共{{ detailMusicList.length }}首)</span></h4>\r\n      </div>\r\n      <div class=\"head-right\">\r\n        <div class=\"coll-btn\">\r\n<!--          <svg class=\"icon\" aria-hidden=\"true\">-->\r\n<!--            <use xlink:href=\"#icon-jia\"></use>-->\r\n<!--          </svg>-->\r\n          <span>收藏量({{ subscribedCount }})</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <VMusicItem :musicList=\"detailMusicList\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {useStore} from 'vuex'\r\nimport {computed} from 'vue'\r\nimport VMusicItem from '@/components/VMusicItem'\r\n\r\nexport default {\r\n  name: 'DetailContent',\r\n  components: {\r\n    VMusicItem,\r\n  },\r\n  props: {\r\n    detailMusicList: Array,\r\n    subscribedCount: Number,\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    //获取收藏量\r\n    // const subscribedCount = computed(() => store.state.MusicDetail.detail.subscribedCount)\r\n    //获取音乐列表\r\n    // const detailMusicList = computed(() => store.state.MusicDetail.detailMusicList)\r\n    //将音乐添加播放列表\r\n    function playAll () {\r\n      store.commit('FooterMusic/updatePlayList', props.detailMusicList)\r\n      store.commit('FooterMusic/updatePlayListIndex', 0)\r\n    }\r\n\r\n    return {\r\n      // subscribedCount,\r\n      // detailMusicList,\r\n      playAll,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail-content {\r\n  margin-top: 0.2rem;\r\n  background-color: #fff;\r\n  width: 100%;\r\n  border-top-left-radius: 0.4rem;\r\n  border-top-right-radius: 0.4rem;\r\n\r\n  .head {\r\n    padding: 5px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n\r\n    .head-left {\r\n      width: 50%;\r\n      display: flex;\r\n\r\n      h4 {\r\n        span {\r\n          font-weight: lighter;\r\n          font-size: 0.24rem;\r\n          color: #999;\r\n        }\r\n      }\r\n    }\r\n\r\n    .head-right {\r\n      .coll-btn {\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 0.2rem;\r\n        border-radius: 0.4rem;\r\n        background-color: #f33;\r\n        color: #eee;\r\n\r\n        .icon {\r\n          margin-right: 5px;\r\n          width: 0.3rem;\r\n          height: 0.3rem;\r\n          fill: #eee;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./DetailContent.vue?vue&type=template&id=30930022&scoped=true\"\nimport script from \"./DetailContent.vue?vue&type=script&lang=js\"\nexport * from \"./DetailContent.vue?vue&type=script&lang=js\"\n\nimport \"./DetailContent.vue?vue&type=style&index=0&id=30930022&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\project\\\\wangyiyun\\\\wangyiyun\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-30930022\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=f658dcfa\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\project\\\\wangyiyun\\\\wangyiyun\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","$props","_createElementBlock","_Fragment","_renderList","$setup","music","index","key","id","_createElementVNode","onClick","_toDisplayString","name","ar","author","props","musicList","Array","setup","store","useStore","playMusic","commit","toRaw","selfMusicList","computed","map","item","al","album","artists","mv","toString","mvid","__exports__","render","_createVNode","_component_DetailHeader","detail","_ctx","creator","_component_DetailContent","detailMusicList","subscribedCount","_hoisted_5","_hoisted_9","_hoisted_23","src","coverImgUrl","alt","go","_hoisted_7","push","playCount","avatarUrl","nickname","description","commentCount","_hoisted_26","shareCount","_component_van_popup","show","$event","position","style","height","width","_hoisted_27","_component_van_list","loading","finished","onLoad","offset","commentId","user","content","timeStr","Object","playlistObj","reactive","showPlaylistComment","playlistCommentList","currentCommentPage","commentLoading","commentFinished","async","result","reqPlaylistComment","comments","length","changeCount","num","toFixed","toRefs","_hoisted_3","_component_VMusicItem","components","VMusicItem","Number","playAll","DetailHeader","DetailContent","route","useRoute","query","loadStatus","ref","asyncData","Promise","all","reqPlayListDetail","reqDetailMusicList","then","res","value","playlist","songs"],"sourceRoot":""}